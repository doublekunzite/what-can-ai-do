<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Builder - What Can AI Do?</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¤–</text></svg>" type="image/svg+xml">
    <link rel="stylesheet" href="css/style.css?v=2">
    
    <!-- Theme script in head -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
</head>
<body>
    <button id="theme-toggle" class="theme-toggle">ğŸŒ™ Dark</button>

    <div id="nav-container" style="margin-bottom: 2em;"></div>

    <main>
        <h1>Prompt Builder</h1>
        <p class="subtitle">Create structured, multi-step AI conversations for common tasks.</p>
        
        <section class="intro-section">
            <p>Instead of crafting individual prompts, build complete AI workflows. Each template provides a series of prompts designed to work together for a specific goalâ€”like having an AI tutor, research assistant, or creative partner.</p>
            <p>Click a category below, customize the parameters, then copy the entire conversation flow. You can edit any prompt content, add new steps, or remove steps to fit your exact needs.</p>
        </section>
        
        <section class="builder-section">
            <div class="filter-controls">
                <h3>Choose Your Goal:</h3>
                <div class="filter-buttons prompt-selector">
                    <button class="filter-btn active" data-category="study">ğŸ“š Study Session</button>
                    <button class="filter-btn" data-category="research">ğŸ”¬ Research Project</button>
                    <button class="filter-btn" data-category="write">âœï¸ Content Creation</button>
                    <button class="filter-btn" data-category="solve">ğŸ§© Problem Solving</button>
                    <button class="filter-btn" data-category="code">ğŸ’» Code Project</button>
                    <button class="filter-btn" data-category="analyze">ğŸ“Š Data Analysis</button>
                    <button class="filter-btn" data-category="website">ğŸŒ Build a Website</button>
                </div>
            </div>
            
            <div id="builder-content">
                <!-- Study Session Template -->
                <div class="builder-template" id="study-template">
                    <h2>30-Minute Study Session Builder</h2>
                    <p>Create a structured learning workflow with an AI tutor.</p>
                    
                    <div class="parameter-inputs">
                        <label>
                            <strong>Subject:</strong>
                            <input type="text" id="study-subject" placeholder="e.g., Mitosis and Meiosis" value="Mitosis and Meiosis">
                        </label>
                        <label>
                            <strong>Your level:</strong>
                            <select id="study-level">
                                <option value="high school">High School</option>
                                <option value="college">College</option>
                                <option value="graduate">Graduate</option>
                                <option value="casual">Casual Learner</option>
                            </select>
                        </label>
                        <label>
                            <strong>Time available:</strong>
                            <select id="study-duration">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">60 minutes</option>
                            </select>
                        </label>
                    </div>
                    
                    <div class="conversation-flow" id="study-flow">
                        <h3>Conversation Flow:</h3>
                    </div>
                    
                    <div class="step-controls">
                        <button class="add-step-btn" onclick="addStep('study')">+ Add Step</button>
                    </div>
                    
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('study')">ğŸ“‹ Copy Complete Flow</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('study')">ğŸ”„ Reset</button>
                    </div>
                </div>
                
                <!-- Other templates hidden -->
                <div class="builder-template hidden" id="research-template">
                    <h2>Research Project Builder</h2>
                    <div class="parameter-inputs">
                        <label><strong>Research topic:</strong>
                            <input type="text" id="research-topic" placeholder="e.g., Climate adaptation strategies" value="Climate adaptation strategies">
                        </label>
                        <label><strong>Number of sources:</strong>
                            <input type="number" id="research-sources" placeholder="e.g., 15" value="15" min="5" max="50">
                        </label>
                    </div>
                    <div class="conversation-flow" id="research-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('research')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('research')">ğŸ“‹ Copy</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('research')">ğŸ”„ Reset</button>
                    </div>
                </div>
                
                <div class="builder-template hidden" id="write-template">
                    <h2>Content Creation Builder</h2>
                    <div class="parameter-inputs">
                        <label><strong>Content type:</strong>
                            <select id="write-type">
                                <option value="a blog post">Blog Post</option>
                                <option value="a report">Report</option>
                                <option value="social media content">Social Media</option>
                                <option value="an email">Email</option>
                            </select>
                        </label>
                        <label><strong>Topic:</strong>
                            <input type="text" id="write-topic" placeholder="e.g., AI in healthcare" value="AI in healthcare">
                        </label>
                        <label><strong>Target audience:</strong>
                            <input type="text" id="write-audience" placeholder="e.g., general readers" value="general readers">
                        </label>
                        <label><strong>Word count:</strong>
                            <input type="number" id="write-count" placeholder="e.g., 800" value="800" min="100" max="5000">
                        </label>
                    </div>
                    <div class="conversation-flow" id="write-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('write')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('write')">ğŸ“‹ Copy</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('write')">ğŸ”„ Reset</button>
                    </div>
                </div>
                
                <div class="builder-template hidden" id="solve-template">
                    <h2>Problem Solving Builder</h2>
                    <div class="parameter-inputs">
                        <label><strong>Problem description:</strong>
                            <textarea id="solve-problem" rows="4">My website loads slowly and I'm losing visitors</textarea>
                        </label>
                    </div>
                    <div class="conversation-flow" id="solve-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('solve')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('solve')">ğŸ“‹ Copy</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('solve')">ğŸ”„ Reset</button>
                    </div>
                </div>
                
                <div class="builder-template hidden" id="code-template">
                    <h2>Code Project Builder</h2>
                    <div class="parameter-inputs">
                        <label><strong>Project description:</strong>
                            <textarea id="code-project" rows="4">Build a simple task manager app</textarea>
                        </label>
                        <label><strong>Programming language:</strong>
                            <select id="code-language">
                                <option value="Python">Python</option>
                                <option value="JavaScript">JavaScript</option>
                                <option value="Java">Java</option>
                                <option value="Other">Other</option>
                            </select>
                        </label>
                    </div>
                    <div class="conversation-flow" id="code-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('code')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('code')">ğŸ“‹ Copy</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('code')">ğŸ”„ Reset</button>
                    </div>
                </div>
                
                <div class="builder-template hidden" id="analyze-template">
                    <h2>Data Analysis Builder</h2>
                    <div class="parameter-inputs">
                        <label><strong>Dataset description:</strong>
                            <textarea id="analyze-dataset" rows="4">Customer survey responses from Q3 2024</textarea>
                        </label>
                    </div>
                    <div class="conversation-flow" id="analyze-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('analyze')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('analyze')">ğŸ“‹ Copy</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('analyze')">ğŸ”„ Reset</button>
                    </div>
                </div>
            </div>
        </section>
        
        <footer>
            <p><a href="index.html">â† Back to Home</a></p>
        </footer>
    </main>

    <!-- Load navigation and theme only (prompt builder is inline below) -->
    <script src="/what-can-ai-do/js/navigation.js"></script>
    <script src="/what-can-ai-do/js/theme.js"></script>

    <!-- INLINE PROMPT BUILDER JS - DEBUG VERSION -->
<script>
// DEVELOPER: Open browser console (F12) to see debug logs
console.log('ğŸš€ PROMPT BUILDER: Script starting...');

// Template definitions
const templates = {
    study: [
        {
            title: "Step 1: Foundation (5 min)",
            content: "I need to study {{subject}} at a {{level}} level.\nFirst, create a concise study guide that covers the key concepts I must understand.\nInclude 3-5 main topics with brief descriptions."
        },
        {
            title: "Step 2: Active Recall (10 min)",
            content: "Based on the study guide you just provided, generate 10 practice questions about {{subject}}.\nMix question types: 4 definition/fact-based, 3 application problems, and 3 \"explain in your own words\" prompts.\nDon't provide the answers yetâ€”I'll answer them first."
        },
        {
            title: "Step 3: Check & Explain (10 min)",
            content: "Here are my answers to your questions: [PASTE YOUR ANSWERS HERE]\n\nGrade my responses and explain what I got wrong or could improve.\nFor each incorrect answer, provide a detailed explanation and a mnemonic to help me remember it."
        },
        {
            title: "Step 4: Connection & Application (5 min)",
            content: "Now connect {{subject}} to real-world applications or current research.\nGive me 2 examples of how this is used in practice, and 1 area where our understanding is still developing."
        }
    ]
};

// Global error handler
window.addEventListener('error', (e) => {
    console.error('âŒ UNCAUGHT ERROR:', e.error);
});

// Wait for DOM
function initWhenReady() {
    const flow = document.getElementById('study-flow');
    if (flow) {
        console.log('âœ… Found study-flow element:', flow);
        renderSteps('study');
        bindEvents();
    } else {
        console.log('â³ Waiting for study-flow element...');
        setTimeout(initWhenReady, 200);
    }
}

// Render steps for a category
function renderSteps(category) {
    console.log(`ğŸ¨ Rendering steps for: ${category}`);
    const flow = document.getElementById(category + '-flow');
    
    if (!flow) {
        console.error('âŒ Flow container not found:', category + '-flow');
        return;
    }
    
    console.log('ğŸ“‹ Flow container:', flow);
    console.log('ğŸ“‹ Templates available:', templates[category]);
    
    // Clear existing steps (keep h3)
    while (flow.children.length > 1) {
        flow.removeChild(flow.lastChild);
    }
    
    // Add each step
    templates[category].forEach((step, index) => {
        console.log(`ğŸ“ Adding step ${index + 1}:`, step.title);
        try {
            const stepEl = createStepElement(step, index);
            flow.appendChild(stepEl);
            console.log(`âœ… Step ${index + 1} added successfully`);
        } catch (err) {
            console.error(`âŒ Failed to add step ${index + 1}:`, err);
        }
    });
    
    console.log('ğŸ‰ All steps rendered');
}

// Create a single step element
function createStepElement(step, index) {
    const div = document.createElement('div');
    div.className = 'builder-step';
    div.innerHTML = `
        <div class="step-box editable" style="border: 2px dashed #4da6ff; margin: 1em 0; padding: 1em; background: #2a2a2a;">
            <div class="step-header" style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1em;">
                <h4 style="margin: 0; flex: 1;">${step.title}</h4>
                <div class="step-actions">
                    <button class="btn-copy" style="background: #0066cc; color: white; border: none; padding: 0.5em 1em; margin-right: 0.5em; cursor: pointer;">Copy</button>
                    <button class="btn-x" style="background: #dc3545; color: white; border: none; padding: 0.5em 1em; cursor: pointer;">Ã—</button>
                </div>
            </div>
            <pre class="step-content" contenteditable="true" data-index="${index}" style="margin: 0; padding: 1em; background: #1a1a1a; border: 1px solid #444; white-space: pre-wrap; font-family: monospace;">${step.content}</pre>
        </div>
    `;
    return div;
}

// Bind events
function bindEvents() {
    console.log('ğŸ¯ Binding events...');
    
    // Category buttons
    document.querySelectorAll('.filter-btn[data-category]').forEach(btn => {
        btn.addEventListener('click', () => {
            const category = btn.dataset.category;
            console.log('ğŸ–±ï¸ Category clicked:', category);
            
            // Update active button
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Show/hide templates
            document.querySelectorAll('.builder-template').forEach(t => {
                t.classList.toggle('hidden', t.id !== category + '-template');
            });
            
            renderSteps(category);
        });
    });
    
    console.log('âœ… Events bound');
}

// Global functions for buttons
window.addStep = function(category) {
    alert('Add step clicked for: ' + category);
};

window.copyAllPrompts = function(category) {
    alert('Copy all clicked for: ' + category);
};

window.resetTemplate = function(category) {
    alert('Reset clicked for: ' + category);
};

// Start initialization
console.log('ğŸ”„ Starting initialization...');
initWhenReady();
</script>
</body>
</html>