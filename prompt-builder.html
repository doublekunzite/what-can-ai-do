<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Builder - What Can AI Do?</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22  viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>" type="image/svg+xml">
    <link rel="stylesheet" href="css/style.css?v=2">
    
    <!-- Theme script in head -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
</head>
<body>
    <button id="theme-toggle" class="theme-toggle">üåô Dark</button>

    <div id="nav-container" style="margin-bottom: 2em;"></div>

    <main>
        <h1>Prompt Builder</h1>
        <p class="subtitle">Create structured, multi-step AI conversations for common tasks.</p>
        
        <section class="intro-section">
            <p>Instead of crafting individual prompts, build complete AI workflows. Each template provides a series of prompts designed to work together for a specific goal‚Äîlike having an AI tutor, research assistant, or creative partner.</p>
            <p>Click a category below, customize the parameters, then copy the entire conversation flow. You can edit any prompt content, add new steps, or remove steps to fit your exact needs.</p>
        </section>
        
        <section class="builder-section">
            <div class="filter-controls">
                <h3>Choose Your Goal:</h3>
                <div class="filter-buttons prompt-selector">
                    <button class="filter-btn active" data-category="study">üìö Study Session</button>
                    <button class="filter-btn" data-category="research">üî¨ Research Project</button>
                    <button class="filter-btn" data-category="write">‚úçÔ∏è Content Creation</button>
                    <button class="filter-btn" data-category="solve">üß© Problem Solving</button>
                    <button class="filter-btn" data-category="code">üíª Code Project</button>
                    <button class="filter-btn" data-category="analyze">üìä Data Analysis</button>
                    <button class="filter-btn" data-category="website">üåê Build a Website</button>
                </div>
            </div>
            
            <div id="builder-content">
                <!-- Study Session Template -->
                <div class="builder-template" id="study-template">
                    <h2>30-Minute Study Session Builder</h2>
                    <p>Create a structured learning workflow with an AI tutor.</p>
                    
                    <div class="parameter-inputs">
                        <label><strong>Subject:</strong>
                            <input type="text" id="study-subject" placeholder="e.g., Mitosis and Meiosis" value="Mitosis and Meiosis">
                        </label>
                        <label><strong>Your level:</strong>
                            <select id="study-level">
                                <option value="high school">High School</option>
                                <option value="college">College</option>
                                <option value="graduate">Graduate</option>
                                <option value="casual">Casual Learner</option>
                            </select>
                        </label>
                        <label><strong>Time available:</strong>
                            <select id="study-duration">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">60 minutes</option>
                            </select>
                        </label>
                    </div>
                    
                    <div class="conversation-flow" id="study-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('study')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('study')">üìã Copy Complete Flow</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('study')">üîÑ Reset</button>
                    </div>
                </div>
                
                <!-- Research Project Template -->
                <div class="builder-template hidden" id="research-template">
                    <h2>Research Project Builder</h2>
                    <p>Systematically research and synthesize information.</p>
                    
                    <div class="parameter-inputs">
                        <label><strong>Research topic:</strong>
                            <input type="text" id="research-topic" placeholder="e.g., Climate adaptation strategies" value="Climate adaptation strategies">
                        </label>
                        <label><strong>Number of sources:</strong>
                            <input type="number" id="research-sources" placeholder="e.g., 15" value="15" min="5" max="50">
                        </label>
                    </div>
                    
                    <div class="conversation-flow" id="research-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('research')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('research')">üìã Copy Complete Flow</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('research')">üîÑ Reset</button>
                    </div>
                </div>
                
                <!-- Website Builder Template -->
                <div class="builder-template hidden" id="website-template">
                    <h2>Website Building Guide</h2>
                    <p>Build a basic static website using GitHub Pages and simple tools.</p>
                    
                    <div class="parameter-inputs">
                        <label><strong>Website name:</strong>
                            <input type="text" id="website-name" placeholder="e.g., My Portfolio" value="My Personal Site">
                        </label>
                        <label><strong>Purpose:</strong>
                            <select id="website-purpose">
                                <option value="personal">Personal Blog/Portfolio</option>
                                <option value="project">Project Documentation</option>
                                <option value="business">Small Business</option>
                                <option value="education">Educational Resource</option>
                            </select>
                        </label>
                        <label><strong>Pages needed:</strong>
                            <select id="website-pages">
                                <option value="1-2">1-2 pages</option>
                                <option value="3-4" selected>3-4 pages</option>
                                <option value="5+">5+ pages</option>
                            </select>
                        </label>
                    </div>
                    
                    <div class="conversation-flow" id="website-flow"><h3>Conversation Flow:</h3></div>
                    <div class="step-controls"><button class="add-step-btn" onclick="addStep('website')">+ Add Step</button></div>
                    <div class="builder-actions">
                        <button class="filter-btn" onclick="copyAllPrompts('website')">üìã Copy Complete Flow</button>
                        <button class="filter-btn secondary" onclick="resetTemplate('website')">üîÑ Reset</button>
                    </div>
                </div>
            </div>
        </section>
        
        <footer>
            <p><a href="index.html">‚Üê Back to Home</a></p>
        </footer>
    </main>

    <!-- Load navigation and theme only (prompt builder is inline below) -->
    <script src="/what-can-ai-do/js/navigation.js"></script>
    <script src="/what-can-ai-do/js/theme.js"></script>

<!-- INLINE PROMPT BUILDER JS - ROBUST VERSION -->
<script>
console.log('üöÄ PROMPT BUILDER: Starting initialization...');

// Dynamic study template generator based on time available
function getStudyTemplate(duration) {
    const durationMap = {
        '15': [
            {
                title: "Step 1: Quick Foundation (5 min)",
                content: "I need a rapid overview of {{subject}} at a {{level}} level.\nCreate a focused study guide with the 3 most critical concepts only.\nKeep descriptions brief but clear."
            },
            {
                title: "Step 2: Targeted Practice (7 min)",
                content: "Generate 5 targeted practice questions covering these key concepts.\nMix: 2 definition-based and 3 quick application questions.\nKeep them concise for rapid review."
            },
            {
                title: "Step 3: Quick Check (3 min)",
                content: "Here's my brief attempt at answering: [PASTE YOUR ANSWERS HERE]\n\nQuickly check my answers and highlight only the most important corrections.\nFocus on the single biggest misconception I might have."
            }
        ],
        '30': [
            {
                title: "Step 1: Foundation (5 min)",
                content: "I need to study {{subject}} at a {{level}} level.\nFirst, create a concise study guide that covers the key concepts I must understand.\nInclude 3-5 main topics with brief descriptions."
            },
            {
                title: "Step 2: Active Recall (10 min)",
                content: "Based on the study guide you just provided, generate 10 practice questions about {{subject}}.\nMix question types: 4 definition/fact-based, 3 application problems, and 3 \"explain in your own words\" prompts.\nDon't provide the answers yet‚ÄîI'll answer them first."
            },
            {
                title: "Step 3: Check & Explain (10 min)",
                content: "Here are my answers to your questions: [PASTE YOUR ANSWERS HERE]\n\nGrade my responses and explain what I got wrong or could improve.\nFor each incorrect answer, provide a detailed explanation and a mnemonic to help me remember it."
            },
            {
                title: "Step 4: Connection & Application (5 min)",
                content: "Now connect {{subject}} to real-world applications or current research.\nGive me 2 examples of how this is used in practice, and 1 area where our understanding is still developing."
            }
        ],
        '60': [
            {
                title: "Step 1: Deep Foundation (12 min)",
                content: "I need an in-depth study of {{subject}} at a {{level}} level.\nCreate a comprehensive study guide with 6-8 key concepts.\nInclude detailed explanations, examples, and common misconceptions for each topic."
            },
            {
                title: "Step 2: Varied Practice (18 min)",
                content: "Based on the study guide, generate 15 practice questions of varying difficulty.\nInclude: 5 definition/fact-based, 5 application problems, and 5 critical thinking questions.\nDon't provide the answers yet."
            },
            {
                title: "Step 3: Detailed Feedback (20 min)",
                content: "Here are my answers: [PASTE YOUR ANSWERS HERE]\n\nProvide detailed feedback on each answer, identify knowledge gaps, and suggest specific resources for further study.\nCreate a follow-up study plan based on my weaknesses."
            },
            {
                title: "Step 4: Advanced Application (10 min)",
                content: "Create 5 challenging scenario-based questions that require synthesizing multiple concepts from {{subject}}.\nThese should test deeper understanding and problem-solving skills."
            }
        ]
    };
    
    return durationMap[duration] || durationMap['30']; // Default to 30 min
}

// Update study template based on dropdown
function updateStudyTemplate() {
    const duration = document.getElementById('study-duration')?.value || '30';
    if (templates.study.original === undefined) {
        // Store original template for reset functionality
        templates.study.original = templates.study;
    }
    templates.study = getStudyTemplate(duration);
    console.log('üìö Study template updated for', duration, 'minutes');
}

// Template definitions - ALL CATEGORIES
const templates = {
    study: getStudyTemplate('30'), // Initialize with default 30 min
    research: [
        {
            title: "Step 1: Research Plan",
            content: "I need to research \"{{topic}}\".\nFirst, help me create a research plan. What are the 5-7 key sub-topics I should investigate?\nFor each, suggest 2-3 search terms and 1-2 types of sources to look for."
        },
        {
            title: "Step 2: Source Evaluation",
            content: "I've found {{sources}} sources. Help me evaluate them:\n1. Sort them by credibility (peer-reviewed > academic > government > NGO > news > blog)\n2. Identify 3 sources that might have bias and explain what to watch for\n3. Suggest which 5-7 sources I should prioritize reading first"
        },
        {
            title: "Step 3: Synthesis",
            content: "Based on these sources about \"{{topic}}\", create a synthesis matrix:\n- 3 main schools of thought or approaches\n- 2 areas of consensus across sources\n- 3 major debates or disagreements\n- 4 gaps in current research"
        },
        {
            title: "Step 4: Outline & Draft",
            content: "Create a detailed outline for my research report on \"{{topic}}\".\n\nInclude:\n1. Executive summary structure\n2. Main sections with key points\n3. Data visualization suggestions\n4. References format\n\nThen help me draft the introduction section."
        }
    ],
    website: [
        {
            title: "Step 1: Concept & Structure",
            content: "I want to build a website called \"{{website-name}}\" for {{website-purpose}} with {{website-pages}} pages.\nBased on this, suggest:\n1. The essential pages I need and their purpose\n2. A simple folder structure\n3. Whether GitHub Pages is suitable or if I need alternatives\n4. Any security considerations I should know about"
        },
        {
            title: "Step 2: Setup & Initial Files",
            content: "Walk me through the exact steps to set up {{website-name}}:\n1. Create GitHub repository and enable Pages\n2. Create the main index.html with proper HTML5 boilerplate\n3. Create the navigation menu that links all pages\n4. Add basic CSS file with dark/light mode support\n5. Include meta tags for SEO and mobile responsiveness\n\nProvide the complete, ready-to-use code for each file."
        },
        {
            title: "Step 3: Build All Pages",
            content: "Now generate the complete code for all pages of {{website-name}}:\n\nFor each page, provide:\n1. Full HTML with proper semantic tags\n2. Inline CSS for unique styling (if any)\n3. Any necessary JavaScript\n4. Comments explaining security best practices\n\nFocus on: clean structure, accessibility, and loading performance."
        },
        {
            title: "Step 4: Security & Deployment Review",
            content: "Review my {{website-name}} website for security issues and deployment readiness:\n\n1. Check for: XSS vulnerabilities, insecure links, exposed email addresses\n2. Suggest improvements to the code structure\n3. Provide a pre-launch checklist\n4. Explain how to update the site after deployment\n5. Suggest tools for monitoring and maintenance"
        },
        {
            title: "Step 5: Customization Guide",
            content: "I want to customize {{website-name}} further. Guide me through:\n\n1. How to modify the design without breaking functionality\n2. Adding new pages or sections\n3. Integrating simple forms (contact, newsletter) securely\n4. Adding analytics while respecting privacy\n5. Optimizing for search engines"
        }
    ],
    write: [
        {
            title: "Step 1: Define & Research",
            content: "I need to create {{content-type}} about {{topic}} for {{audience}}.\nFirst, help me:\n1. Define the core message and key takeaways\n2. Research 5-7 key points with supporting data or examples\n3. Identify the appropriate tone and style\n4. Outline the structure with estimated word counts"
        },
        {
            title: "Step 2: Draft First Version",
            content: "Based on the research and outline, write the first draft of {{content-type}}.\n\nRequirements:\n- Compelling headline/title\n- Strong opening that hooks {{audience}}\n- Clear structure with smooth transitions\n- Include specific examples and data points\n- Call-to-action or clear conclusion\n\nTarget length: {{word-count}} words"
        },
        {
            title: "Step 3: Review & Improve",
            content: "Review this draft and provide detailed feedback: [PASTE YOUR DRAFT HERE]\n\nEvaluate for:\n1. Clarity and coherence (is the message clear?)\n2. Engagement (will {{audience}} care?)\n3. Accuracy (are facts correct and well-supported?)\n4. Style (is the tone consistent and appropriate?)\n\nProvide specific suggestions for improvement."
        },
        {
            title: "Step 4: Polish & Finalize",
            content: "Now help me create the final version:\n1. Apply all suggested improvements\n2. Optimize the headline/title for engagement\n3. Strengthen the opening and conclusion\n4. Ensure consistent voice and tone\n5. Add any missing transitions or examples"
        }
    ],
    solve: [
        {
            title: "Step 1: Define the Problem",
            content: "I'm trying to solve: {{problem-description}}\n\nHelp me clearly define:\n1. What success looks like (specific, measurable outcome)\n2. Constraints and limitations\n3. What I've already tried\n4. What resources/tools I have available"
        },
        {
            title: "Step 2: Generate Solutions",
            content: "Based on this problem, generate 5-7 distinct solution approaches.\n\nFor each approach:\n1. Brief description of the method\n2. Pros and cons\n3. Estimated time/effort required\n4. Risk level (high/medium/low)\n\nPrioritize creative but practical solutions."
        },
        {
            title: "Step 3: Evaluate & Plan",
            content: "I've reviewed the solutions. Help me choose and plan implementation.\n\nMy top 3 choices: [LIST THEM]\n\nFor my #1 choice, create a detailed action plan:\n1. Step-by-step implementation\n2. Required resources\n3. Timeline with milestones\n4. Contingency plans if it fails"
        }
    ],
    code: [
        {
            title: "Step 1: Requirements & Design",
            content: "I want to build: {{project-description}}\n\nHelp me create technical requirements:\n1. Core features (MVP scope)\n2. Tech stack suggestions ({{language}})\n3. Database/schema needs\n4. API requirements\n5. Testing strategy"
        },
        {
            title: "Step 2: Implementation Plan",
            content: "Break down {{project-description}} into implementation steps:\n\n1. Project structure and file organization\n2. Core functionality implementation order\n3. Integration points and dependencies\n4. Error handling and edge cases\n5. Documentation needs\n\nProvide code snippets for key components."
        },
        {
            title: "Step 3: Code Review",
            content: "Review my code: [PASTE CODE HERE]\n\nCheck for:\n1. Bugs and errors\n2. Performance issues\n3. Security vulnerabilities\n4. Best practices compliance\n5. Code readability\n\nProvide specific, actionable feedback."
        }
    ],
    analyze: [
        {
            title: "Step 1: Data Understanding",
            content: "I have data about {{dataset-description}}.\n\nHelp me understand it:\n1. What questions can this data answer?\n2. What preprocessing is needed?\n3. What analysis methods are appropriate?\n4. What are potential biases or limitations?"
        },
        {
            title: "Step 2: Analysis Plan",
            content: "Create an analysis plan for {{dataset-description}}:\n\n1. Statistical methods to apply\n2. Visualizations to create\n3. Hypothesis testing approach\n4. Expected findings and significance\n5. Tools needed (Python/R/Excel/etc.)"
        },
        {
            title: "Step 3: Interpret Results",
            content: "Here are my analysis results: [PASTE RESULTS]\n\nHelp me interpret:\n1. What do these results mean in plain English?\n2. Are they statistically significant?\n3. What limitations should I mention?\n4. What are the practical implications?\n5. What further analysis would strengthen conclusions?"
        }
    ]
};

// Render steps for a category
function renderSteps(category) {
    const flow = document.getElementById(category + '-flow');
    if (!flow) return;
    
    // Clear existing steps (keep h3)
    while (flow.children.length > 1) {
        flow.removeChild(flow.lastChild);
    }
    
    // Add each step
    templates[category].forEach((step, index) => {
        const stepEl = createStepElement(category, step, index);
        flow.appendChild(stepEl);
    });
    
    // CRITICAL: Update placeholders immediately after rendering
    updatePlaceholders(category);
}

// Create a single step element
function createStepElement(category, step, index) {
    const div = document.createElement('div');
    div.className = 'builder-step';
    div.innerHTML = `
        <div class="step-box editable" style="border: 2px solid var(--border-color); margin: 1.5em 0; padding: 1.5em; background: var(--card-bg); border-radius: 12px; position: relative;">
            <!-- X button in top right -->
            <button class="btn-x" style="position: absolute; top: 1em; right: 1em; background: #dc3545; color: white; border: none; padding: 0.4em 0.8em; cursor: pointer; border-radius: 4px; font-size: 0.9em; font-weight: bold;">√ó</button>
            
            <div class="step-header" style="margin-bottom: 1em; padding-right: 3em;">
                <h4 style="margin: 0; color: var(--text-color); font-weight: 600; font-size: 1.1em; letter-spacing: 0.5px;">${step.title}</h4>
            </div>
            
            <pre class="step-content" contenteditable="true" data-step-content="${index}" style="margin: 0; padding: 1.5em; background: var(--dropdown-header-bg); border: 1px solid var(--border-color); white-space: pre-wrap; font-family: 'Courier New', monospace; color: var(--text-color); border-radius: 6px; line-height: 1.6; min-height: 100px;">${step.content}</pre>
            
            <!-- Copy button in bottom right -->
            <div style="margin-top: 1em; text-align: right;">
                <button class="btn-copy" style="background: var(--nav-link-color); color: white; border: none; padding: 0.6em 1.2em; cursor: pointer; border-radius: 4px; font-size: 0.9em; font-weight: 500;">Copy</button>
            </div>
        </div>
    `;
    
    // Add event listeners
    const copyBtn = div.querySelector('.btn-copy');
    const delBtn = div.querySelector('.btn-x');
    const contentEl = div.querySelector('.step-content');
    
    copyBtn.addEventListener('click', () => copyPrompt(category, index));
    delBtn.addEventListener('click', () => deleteStep(category, index));
    contentEl.addEventListener('input', () => {
        templates[category][index].content = contentEl.textContent;
    });
    
    return div;
}

// Update placeholders - FIXED TO WORK ON ALL CATEGORIES
function updatePlaceholders(category) {
    let params = {};
    switch(category) {
        case 'study':
            params.subject = document.getElementById('study-subject')?.value || 'the subject';
            params.level = document.getElementById('study-level')?.value || 'college';
            params.duration = document.getElementById('study-duration')?.value || '30';
            break;
        case 'research':
            params.topic = document.getElementById('research-topic')?.value || 'the topic';
            params.sources = document.getElementById('research-sources')?.value || '15';
            break;
        case 'website':
            params['website-name'] = document.getElementById('website-name')?.value || 'my website';
            params['website-purpose'] = document.getElementById('website-purpose')?.value || 'personal';
            params['website-pages'] = document.getElementById('website-pages')?.value || '3-4';
            break;
        case 'write':
            params['content-type'] = document.getElementById('write-type')?.value || 'a blog post';
            params.topic = document.getElementById('write-topic')?.value || 'the topic';
            params.audience = document.getElementById('write-audience')?.value || 'general readers';
            params['word-count'] = document.getElementById('write-count')?.value || '800';
            break;
        case 'solve':
            params['problem-description'] = document.getElementById('solve-problem')?.value || 'this problem';
            break;
        case 'code':
            params['project-description'] = document.getElementById('code-project')?.value || 'this project';
            params.language = document.getElementById('code-language')?.value || 'Python';
            break;
        case 'analyze':
            params['dataset-description'] = document.getElementById('analyze-dataset')?.value || 'this dataset';
            break;
    }
    
    // Update ALL step content with placeholders
    const steps = templates[category] || [];
    steps.forEach((step, index) => {
        const contentEl = document.querySelector(`#${category}-flow [data-step-content="${index}"]`);
        if (contentEl) {
            let content = step.content;
            Object.keys(params).forEach(key => {
                const regex = new RegExp(`{{${key}}}`, 'g');
                content = content.replace(regex, params[key]);
            });
            contentEl.textContent = content;
        }
    });
}

// Copy prompt
function copyPrompt(category, index) {
    const step = templates[category][index];
    navigator.clipboard.writeText(`${step.title}\n\n${step.content}`).then(() => {
        const btn = document.querySelector(`#${category}-flow [data-step-content="${index}"]`).parentElement.querySelector('.btn-copy');
        const originalText = btn.textContent;
        btn.textContent = '‚úì Copied!';
        setTimeout(() => btn.textContent = originalText, 1500);
    });
}

// Delete step
function deleteStep(category, index) {
    if (templates[category].length <= 1) {
        alert('You must have at least one step.');
        return;
    }
    if (confirm('Delete this step?')) {
        templates[category].splice(index, 1);
        renderSteps(category);
    }
}

// Global functions
window.addStep = function(category) {
    const newIndex = templates[category].length;
    const newStep = {
        title: `Step ${newIndex + 1}: New Step`,
        content: "Add your prompt content here. Use {{parameter}} for dynamic values."
    };
    templates[category].push(newStep);
    renderSteps(category);
};

window.copyAllPrompts = function(category) {
    const steps = templates[category];
    const allPrompts = steps.map(s => `${s.title}\n\n${s.content}`).join('\n\n---\n\n');
    navigator.clipboard.writeText(allPrompts).then(() => {
        alert(`‚úì Copied ${steps.length} steps!`);
    });
};

window.resetTemplate = function(category) {
    if (confirm('Reset all steps to default?')) {
        if (category === 'study') {
            updateStudyTemplate();
        }
        renderSteps(category);
    }
};

// ==================== CRITICAL: ROBUST INITIALIZATION ====================

function initializeBuilder() {
    console.log('‚öôÔ∏è Initializing builder...');
    
    try {
        // Verify critical elements exist
        const studyFlow = document.getElementById('study-flow');
        const categoryButtons = document.querySelectorAll('.filter-btn[data-category]');
        
        if (!studyFlow) throw new Error('study-flow element not found');
        if (categoryButtons.length === 0) throw new Error('No category buttons found');
        
        // Initialize study template
        updateStudyTemplate();
        renderSteps('study');
        
        // Setup category button handlers - CRITICAL FIX
        categoryButtons.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                
                const category = this.dataset.category;
                console.log('üñ±Ô∏è Category clicked:', category);
                
                // Update active state
                document.querySelectorAll('.filter-btn[data-category]').forEach(b => {
                    b.classList.remove('active');
                });
                this.classList.add('active');
                
                // Show/hide templates with BOTH class and style
                document.querySelectorAll('.builder-template').forEach(template => {
                    const shouldShow = template.id === category + '-template';
                    template.classList.toggle('hidden', !shouldShow);
                    template.style.display = shouldShow ? 'block' : 'none';
                    
                    if (shouldShow) {
                        renderSteps(category);
                    }
                });
            });
        });
        
        // Setup parameter handlers
        document.querySelectorAll('.parameter-inputs input, .parameter-inputs select, .parameter-inputs textarea').forEach(input => {
            input.addEventListener('input', () => {
                const activeCategory = document.querySelector('.filter-btn[data-category].active')?.dataset.category;
                if (activeCategory) updatePlaceholders(activeCategory);
            });
        });
        
        // Setup study duration handler
        const studyDuration = document.getElementById('study-duration');
        if (studyDuration) {
            studyDuration.addEventListener('change', () => {
                updateStudyTemplate();
                const activeCategory = document.querySelector('.filter-btn[data-category].active')?.dataset.category;
                if (activeCategory === 'study') renderSteps('study');
            });
        }
        
        console.log('‚úÖ Builder initialized successfully!');
        
    } catch (error) {
        console.error('‚ùå Builder initialization failed:', error);
    }
}

// Wait for DOM and run
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeBuilder);
} else {
    initializeBuilder();
}
</script>
</body>
</html>